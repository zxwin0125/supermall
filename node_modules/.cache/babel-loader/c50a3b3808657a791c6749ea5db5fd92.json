{"remainingRequest":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/thread-loader/dist/cjs.js!/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/babel-loader/lib/index.js!/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/src/store/actions.js","dependencies":[{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/src/store/actions.js","mtime":1602764112830},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgeyBBRERfQ09VTlRFUiwgQUREX1RPX0NBUlQgfSBmcm9tICIuL211dGF0aW9uLXR5cGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgYWRkQ2FydDogZnVuY3Rpb24gYWRkQ2FydChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICAvLyBwYXlsb2Fk5paw5re75Yqg55qE5ZWG5ZOBCiAgICAvLyBsZXQgb2xkUHJvZHVjdCA9IG51bGw7CiAgICAvLyBmb3IgKGxldCBpdGVtIG9mIHN0YXRlLmNhcnRMaXN0KSB7CiAgICAvLyAgIGlmIChpdGVtLmlpZCA9PT0gcGF5bG9hZC5paWQpIHsKICAgIC8vICAgICBvbGRQcm9kdWN0ID0gaXRlbTsKICAgIC8vICAgfQogICAgLy8gfQogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLy8gMS4g5p+l5om+5LmL5YmN5pWw57uE5Lit5piv5ZCm5pyJ6K+l5ZWG5ZOBCiAgICAgIHZhciBvbGRQcm9kdWN0ID0gY29udGV4dC5zdGF0ZS5jYXJ0TGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWlkID09PSBwYXlsb2FkLmlpZDsKICAgICAgfSk7IC8vIDIuIOWIpOaWrW9sZFByb2R1Y3QKCiAgICAgIGlmIChvbGRQcm9kdWN0KSB7CiAgICAgICAgLy8gb2xkUHJvZHVjdC5jb3VudCArPSAxCiAgICAgICAgY29udGV4dC5jb21taXQoQUREX0NPVU5URVIsIG9sZFByb2R1Y3QpOwogICAgICAgIHJlc29sdmUoJ+W9k+WJjeWVhuWTgeaVsOmHjysxJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGF5bG9hZC5jb3VudCA9IDE7IC8vIGNvbnRleHQuc3RhdGUuY2FydExpc3QucHVzaChwYXlsb2FkKQoKICAgICAgICBjb250ZXh0LmNvbW1pdChBRERfVE9fQ0FSVCwgcGF5bG9hZCk7CiAgICAgICAgcmVzb2x2ZSgn5re75Yqg5oiQ5YqfICEnKTsKICAgICAgfQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/src/store/actions.js"],"names":["ADD_COUNTER","ADD_TO_CART","addCart","context","payload","Promise","resolve","reject","oldProduct","state","cartList","find","item","iid","commit","count"],"mappings":";;AAAA,SACEA,WADF,EAEEC,WAFF,QAGO,iBAHP;AAKA,eAAe;AACbC,EAAAA,OADa,mBACLC,OADK,EACIC,OADJ,EACa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AAIA,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC;AACA,UAAIC,UAAU,GAAGL,OAAO,CAACM,KAAR,CAAcC,QAAd,CAAuBC,IAAvB,CAA4B,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,GAAL,KAAaT,OAAO,CAACS,GAAzB;AAAA,OAAhC,CAAjB,CAFsC,CAItC;;AACA,UAAIL,UAAJ,EAAgB;AACd;AACAL,QAAAA,OAAO,CAACW,MAAR,CAAed,WAAf,EAA4BQ,UAA5B;AACAF,QAAAA,OAAO,CAAC,UAAD,CAAP;AACD,OAJD,MAIO;AACLF,QAAAA,OAAO,CAACW,KAAR,GAAgB,CAAhB,CADK,CAEL;;AACAZ,QAAAA,OAAO,CAACW,MAAR,CAAeb,WAAf,EAA4BG,OAA5B;AACAE,QAAAA,OAAO,CAAC,QAAD,CAAP;AACD;AACF,KAfM,CAAP;AAgBD;AA5BY,CAAf","sourcesContent":["import {\n  ADD_COUNTER,\n  ADD_TO_CART\n} from \"./mutation-type\";\n\nexport default {\n  addCart(context, payload) {\n    // payload新添加的商品\n    // let oldProduct = null;\n    // for (let item of state.cartList) {\n    //   if (item.iid === payload.iid) {\n    //     oldProduct = item;\n    //   }\n    // }\n\n\n\n    return new Promise((resolve, reject) => {\n      // 1. 查找之前数组中是否有该商品\n      let oldProduct = context.state.cartList.find(item => item.iid === payload.iid);\n\n      // 2. 判断oldProduct\n      if (oldProduct) {\n        // oldProduct.count += 1\n        context.commit(ADD_COUNTER, oldProduct)\n        resolve('当前商品数量+1')\n      } else {\n        payload.count = 1;\n        // context.state.cartList.push(payload)\n        context.commit(ADD_TO_CART, payload)\n        resolve('添加成功 !')\n      }\n    })\n  }\n}\n"]}]}