{"remainingRequest":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/src/views/category/Category.vue?vue&type=style&index=0&id=1a0c5ce5&scoped=true&lang=css&","dependencies":[{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/src/views/category/Category.vue","mtime":1603237260840},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zx/Desktop/zxwin/study_project/vue/SuperMall/supermall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2NhdGVnb3J5IHsKICBoZWlnaHQ6IDEwMHZoOwp9Ci5jYXRlZ29yeVRvcCB7CiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItdGludCk7CiAgY29sb3I6IHJlZDsKCiAgYm94LXNoYWRvdzogMCAycHggMXB4IHJnYmEoMTAwLCAxMDAsIDEwMCwgLjA1KTsKfQouY29udGVudCB7CiAgaGVpZ2h0OiAxMDB2aDsKCiAgZGlzcGxheTogZmxleDsKfQojdGFiLWNvbnRlbnQgewogIGhlaWdodDogY2FsYygxMDAlIC0gNDRweCAtIDQ5cHgpOwogIGZsZXg6IDE7Cn0K"},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/views/category","sourcesContent":["<template>\n    <div id=\"category\">\n        <tab-bar class=\"categoryTop\"><div slot=\"center\">分类</div></tab-bar>\n        <div class=\"content\">\n          <tab-menu :categories=\"categories\" \n                    @selectItem=\"selectItem\" \n                    @rightScroll='rightScroll'></tab-menu>\n          <scroll id=\"tab-content\" \n                  :data=\"[categoryData]\" \n                  ref=\"scroll\">\n            <tab-content-category :subcategories=\"showSubcategory\"></tab-content-category>\n          </scroll>\n        </div>\n    </div>\n  </template>\n  \n  <script>\n  import TabBar from 'components/common/tabbar/TabBar.vue'\n  import TabMenu from './childComps/TabMenu.vue'\n  import Scroll from 'components/common/scroll/Scroll.vue'\n  import TabContentCategory from './childComps/TabContentCategory.vue'\n  \n  import {getCategory, getSubCategory} from \"network/category\";\n  \n  export default {\n    components: {\n      TabBar,\n      TabMenu,\n      Scroll,\n      TabContentCategory,\n    },\n    data() {\n      return {\n        categories: [],\n        categoryData: {},\n        currentIndex: -1,\n      }\n    },\n    created() {\n            // 1.请求分类数据\n        this._getCategory()\n    },\n    methods: {\n      _getCategory() {\n            getCategory().then(res => {\n              // 1.获取分类数据\n              this.categories = res.data.category.list\n          // 2.初始化每个类别的子数据\n          for (let i = 0; i < this.categories.length; i++) {\n            this.categoryData[i] = {\n              subcategories: {},\n            }\n          }\n          this._getSubCategories(0)\n        })\n      },\n      _getSubCategories(index) {\n        this.currentIndex = index;\n            const mailKey = this.categories[index].maitKey;\n        getSubCategory(mailKey).then(res => {\n          this.categoryData[index].subcategories = res.data\n          this.categoryData = {...this.categoryData}\n        })\n      },\n      /**\n      * 事件响应相关的方法\n      */\n      selectItem(index) {\n        this._getSubCategories(index)\n      },\n      rightScroll() {\n        this.$refs.scroll.refresh()\n      }            \n    },\n    computed: {\n      showSubcategory() {\n            if (this.currentIndex === -1) return {}\n        return this.categoryData[this.currentIndex].subcategories\n      }\n    }\n  }\n  </script>\n  \n  <style scoped>\n    #category {\n      height: 100vh;\n    }\n    .categoryTop {\n      background-color: var(--color-tint);\n      color: red;\n  \n      box-shadow: 0 2px 1px rgba(100, 100, 100, .05);\n    }\n    .content {\n      height: 100vh;\n  \n      display: flex;\n    }\n    #tab-content {\n      height: calc(100% - 44px - 49px);\n      flex: 1;\n    }\n  </style>"]}]}